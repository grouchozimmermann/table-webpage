<!DOCTYPE html>
<html>

    <head>
        <meta charset="utf-8" />
        <title>Code test for Bionamic</title>
        <link rel="stylesheet" type="text/css" href="tabledesign.css">
        
    </head>

<body>
    
    
<script>

    


var  special_characters = /[`!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~1234567890]/;




class tableCreator {
    constructor(id){
        this.div = document.createElement("div");

        
        //The table
        this.table = document.createElement("table");
        this.table.setAttribute("id", id);
        this.id = id;
        this.nameList = [];
        let newrow = this.table.insertRow();
        newrow.insertCell(0).appendChild(document.createTextNode("First name"));
        newrow.insertCell(1).appendChild(document.createTextNode("Last name"));
        this.div.appendChild(this.table);
        //document.body.appendChild(this.table);
        //The text input field
        this.input = document.createElement("input");
        this.input.setAttribute("type","text");
        this.input.setAttribute("placeholder","First lastname");
        this.input.setAttribute("id",this.id);
        this.input.onkeyup = event => {
            event.preventDefault();
            if (event.keyCode == 13) {
                if( special_characters.test(this.input.value) ) {   
                    alert("Special characters not allowed")
                }
                
             else {
                this.addPerson(this.input.value)
                this.nameList.push(this.input.value)
            }
        }
        }
        //The button
        this.button = document.createElement("input");
        this.button.setAttribute("type", "button");
        this.button.setAttribute("id", this.id);
        this.button.setAttribute("value", "Add")
        
        document.body.appendChild(this.input);
        document.body.appendChild(this.button);
        this.button.onclick = event => {this.print() } //https://stackoverflow.com/questions/57963863/javascript-how-do-i-use-onclick-event-on-a-class-method-to-call-another-class-me
        
        this.div.appendChild(this.input);
        this.div.appendChild(this.button);
        document.body.appendChild(this.div)
        
    }
    print() {
        console.log("kom igen");
    }


    addPerson(fullName) {
        var splitNames = fullName.split(' ');
        let newrow = this.table.insertRow();
        newrow.insertCell(0).appendChild(document.createTextNode(splitNames[0]));
        newrow.insertCell(1).appendChild(document.createTextNode(splitNames[1]));
    }
}



let abdi = new tableCreator("abdi")
let knas = new tableCreator("knas")

//TODO LIST
//Must contain a space with first + last name
//Se till att submitknappen ocks√• funkar 
//Fixa en css fil som stylear tabellerna
</script>


</body>
</html>
